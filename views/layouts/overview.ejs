<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>QUAWACO | Gi√°m s√°t ch·∫•t l∆∞·ª£ng n∆∞·ªõc</title>
  <!-- Tell the browser to be responsive to screen width -->
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="/plugins_2/fontawesome-free/css/all.min.css">
  <!-- Ionicons -->
  <link rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
  <!-- Tempusdominus Bbootstrap 4 -->
  <link rel="stylesheet" href="/plugins_2/tempusdominus-bootstrap-4/css/tempusdominus-bootstrap-4.min.css">
  <!-- iCheck -->
  <link rel="stylesheet" href="/plugins_2/icheck-bootstrap/icheck-bootstrap.min.css">
  <!-- JQVMap -->
  <link rel="stylesheet" href="/plugins_2/jqvmap/jqvmap.min.css">
  <!-- Theme style -->
  <link rel="stylesheet" href="/dist/css/adminlte.min.css">

  <!-- overlayScrollbars -->
  <link rel="stylesheet" href="/plugins_2/overlayScrollbars/css/OverlayScrollbars.min.css">
  <!-- Daterange picker -->
  <link rel="stylesheet" href="/plugins_2/daterangepicker/daterangepicker.css">
  <!-- summernote -->
  <link rel="stylesheet" href="/plugins_2/summernote/summernote-bs4.css">
  <!-- Google Font: Source Sans Pro -->
  <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700" rel="stylesheet">
    <!-- Select2 -->
    <link rel="stylesheet" href="/plugins_2/select2/css/select2.min.css">
    <link rel="stylesheet" href="/plugins_2/select2-bootstrap4-theme/select2-bootstrap4.min.css">

  <link type="text/css" rel="stylesheet" href="/stylesheets/general_style.css">
  <link type="text/css" rel="stylesheet" href="/stylesheets/style_2.css">
  <link type="text/css" rel="stylesheet" href="/stylesheets/gs_chat_luong_nuoc.css">

</head>
<body class="hold-transition layout-top-nav">
<div class="wrapper">
      <!-- Navbar -->
<%- include('../partials/header') %>

  <!-- Content Wrapper. Contains page content -->
  <div class="content-wrapper" style="padding-top: 60px;">
    <!-- Content Header (Page header) -->
    <div class="content-header">
      <!-- <div class="container-fluid">
        <div class="row">
          <div class="col-sm-6">
            <ol class="breadcrumb float-sm-left">
                <li class="breadcrumb-item"><a href="/dashboard">SAO VI·ªÜT</a></li>
                <li class="breadcrumb-item active">Gi√°m s√°t t·ªïng quan</li>
            </ol>          
        </div>
        </div>
      </div> -->
    </div>
    <!-- /.content-header -->

    <!-- Main content -->
    <section class="content">
      <div class="container-fluid">      
        <!-- Main row -->
         <div class="row mb-3">
            <div class="col-lg-3 col-md-4 col-12 d-flex align-items-center ">
                <select class="form-control selectpicker mr-2" style="max-width: 13rem;" data-live-search="true" id="filter_danhsachtram" autocomplete="off" required data-dropup-auto="false">
                    <option value="all" dv_type="all">C√°c ƒë∆°n v·ªã qu·∫£n l√Ω</option>
                    <%
                     const groups=danh_sach_xi_nghiep_nha_may.filter(item=> item.parent_id === null);
                      groups.forEach(group => {
                      const subItems = danh_sach_xi_nghiep_nha_may.filter(item => item.parent_id === group.org_id);
                      %>
                      <!-- Nh√≥m ch√≠nh -->
                      <option value="<%= group.org_id %>" dv_type="xi_nghiep" style="font-weight: bold;">
                        <%= group.name %>
                      </option>
                    
                      <!-- C√°c tr·∫°m con -->
                      <% subItems.forEach(tram=> { %>
                        <option value="<%= tram.org_id %>" dv_type="nha_may">&nbsp;&nbsp;&nbsp;<%= tram.name %>
                        </option>
                        <% }); %>
                    
                          <% }); %>
                </select>
            </div>
         </div>
        <div class="row">
          <section class="col-lg-3 col-md-4 col-12 " style="max-height: calc(100vh - 160px); overflow: auto;">
            <div class="card">
                <div class="card-header" style="height: 65px !important;">
                    <div class="row ">
                        <div class="col  ">
                            <h5 class="mt-2" id="ten_tram"><%=count_status%></h5>
                        </div>
                    </div>
                </div>
                <div class="card-body table-responsive">
                    <input type="text" id="searchInput" class="form-control mb-3" placeholder="T√¨m ki·∫øm">

                    <table id="danhsachtram" class="table table-hover" style="width: 100%; table-layout: fixed;">
                        <thead>
                            <tr>
                                <th class="sortable" data_column="name">T√™n tr·∫°m <i class="fas fa-sort-down"></i></th>
                                <th class="sortable" data_column="status" style="width: 63px">TT <i class="fas fa-sort-down"></i></th>
                            </tr>
                        </thead>
                        <tbody id="danhsachtram_body">
                            <% for(let i=0; i < danh_sach_thiet_b·ªã.length; i++){ %>
                                <tr MeterCode="<%= danh_sach_thiet_b·ªã[i].MeterCode%>" NodeCode="<%= danh_sach_thiet_b·ªã[i].NodeCode %>"  meter_name="<%= danh_sach_thiet_b·ªã[i].meter_name %>" meter_status="<%= danh_sach_thiet_b·ªã[i].status_meter%>" data_type="<%= danh_sach_thiet_b·ªã[i].data_type%>">
                                    <!-- <td class="text-center"><%= i+1 %></td> -->
                                    <td class="text-left" ><%= danh_sach_thiet_b·ªã[i].meter_name%></td>
                                    <% if(danh_sach_thiet_b·ªã[i].status_meter == 2){ %>
                                        <td class="text-center" meter_status="<%= danh_sach_thiet_b·ªã[i].status_meter%>" ><span><i class="fa fa-circle text-success"></i></span></td>
                                    <%}else if(danh_sach_thiet_b·ªã[i].status_meter == 1){ %>
                                        <td class="text-center" meter_status="<%= danh_sach_thiet_b·ªã[i].status_meter%>" ><span><i class="fa fa-circle text-success"></i></span></td>
                                    <%}else{ %>
                                        <td class="text-center" meter_status="<%= danh_sach_thiet_b·ªã[i].status_meter%>" ><span><i class="fa fa-circle text-danger"></i></span></td>
                                    <%}%>
                                </tr>
                            <% } %>
                        </tbody>
                    </table>
                </div>
            </div>
          </section>
          <section class="col-lg-9 col-md-8 col-12" style="max-height: calc(100vh - 160px); overflow: auto;" id="data_section">
            <div class="card" id="danh_sach_nha_may_card" style="display: block;">
              <div class="card-body"  style="min-height: calc(100vh - 200px);">
                <div class="page-header">
                  <div class="page-title">
                    <div class="d-flex align-items-end">
                      <img src="/images/factory.png" width="35px" class="mr-2">
                      <span style="font-size: x-large; font-weight: bolder; color: #262626cd;">DANH S√ÅCH NH√Ä M√ÅY</span>
                    </div>
         
                  </div>
                </div>
                <div class="stats-grid" id="danh_sach_nha_may_contaier">
                  <% for(let i=0; i < danh_sach_nha_may.length; i++){ %>
                  <div class="stat-card-large">
                    <div class="d-flex align-items-center">
                      <div class="stat-icon-supper-large"><img src="/images/factory.png" width="35px"></div>
                      <div class="stat-label-large font-weight-bold" style="color: #262626cd;"><%=danh_sach_nha_may[i].org_name %></div>
                    </div>
                    <div class="panel-actions">
                      <!-- <span class="devices-count" id="filteredCount" style="display: block;">4 thi·∫øt b·ªã</span> -->
                      <button class="btn-overview truy_cap_nha_may" org_id="<%=danh_sach_nha_may[i].id_nha_may %>" style="display: block;">V√†o gi√°m s√°t</button>
                    </div>
                    <!-- <div class="stat-value-supper-large font-weight-bold">NM N∆∞·ªõc ƒë·ªìng m√¢y</div> -->
                    <!-- <div class="stat-subvalue">4 thi·∫øt b·ªã</div> -->
                  </div>
                  <% } %>
                </div>
              </div>
            </div>
            <div class="card" id="chi_so_moi_truong_card" style="display: none;">
                <div class="card-body" style="min-height: calc(100vh - 200px);">
                  <div class="page-header">
                    <div class="page-title">
                      <h4>üìà CH·ªà S·ªê M√îI TR∆Ø·ªúNG CH·∫§T L∆Ø·ª¢NG N∆Ø·ªöC</h4>
                      <div class="devices-count"><span id="he_thong_giam_sat"></span> h·ªá th·ªëng gi√°m s√°t</div>
                    </div>     
                  </div>

                  <!-- Th·ªëng k√™ t·ªïng quan -->
                  <div class="stats-grid">
                      <div class="stat-card-large">
                        <div class="d-flex align-items-center">
                          <div class="stat-icon-large">üåä</div>
                          <div class="stat-label-large">CH·∫§T L∆Ø·ª¢NG N∆Ø·ªöC TH√î</div>
                        </div>
                        <div class="stat-value-large font-weight-bold text-success" id="chat_luong_nuoc_tho">...</div>
                        <div class="stat-subvalue"><span id="chi_so_on_dinh">...</span> ch·ªâ s·ªë ·ªïn ƒë·ªãnh</div>
                      </div>
                      <div class="stat-card-large">
                        <div class="d-flex align-items-center">
                          <div class="stat-icon-large">üíß</div>
                          <div class="stat-label-large">CH·∫§T L∆Ø·ª¢NG N∆Ø·ªöC S·∫†CH</div>
                        </div>
                        <div class="stat-value-large text-success font-weight-bold" id="chat_luong_nuoc_sach">TUY·ªÜT V·ªúI</div>
                        <div class="stat-subvalue"><span id="chi_so_dat_chuan">...</span> ch·ªâ s·ªë ƒë·∫°t chu·∫©n</div>
                      </div>
                      <div class="stat-card-large">
                        <div class="d-flex align-items-center">
                          <div class="stat-icon-large">‚ö°</div>
                          <div class="stat-label-large">C·∫¨P NH·∫¨T</div>
                        </div>
                        <div class="stat-value-large" style="font-size: 18px;" id="thoi_gian">...</div>
                        <div class="stat-subvalue">D·ªØ li·ªáu th·ªùi gian th·ª±c</div>
                      </div>
                      <div class="stat-card-large">
                        <div class="d-flex align-items-center">
                          <div class="stat-icon-large">‚úÖ</div>
                          <div class="stat-label-large">TR·∫†NG TH√ÅI</div>
                        </div>
                        <div class="stat-value-large" style="color: #4CAF50;" id="trang_thai">...</div>
                        <div class="stat-subvalue">Kh√¥ng c√≥ c·∫£nh b√°o</div>
                      </div>        
                    </div>
                    <!-- Ch·∫•t l∆∞·ª£ng n∆∞·ªõc -->
                    <div class="water-quality-grid">
                      <!-- N∆∞·ªõc th√¥ -->
                      <div class="water-quality-card" data-type="raw">
                        <h5>üåä N∆Ø·ªöC TH√î - <span class="name_nuoc_tho"></span></h5>
                        <div class="parameter-grid">
                            <div class="parameter-item">
                                <div class="parameter-name">Nhi·ªát ƒë·ªô</div>
                                <div class="d-flex align-items-center">
                                    <div class="parameter-value" id="nuoc_tho_nhiet_do">...</div>
                                    <div class="parameter-unit">¬∞C</div>
                                </div>
                                <span class="parameter-status status-good nuoc_tho_nhiet_do">·ªîn ƒë·ªãnh</span>
                            </div>
                            <div class="parameter-item">
                                <div class="parameter-name">ƒê·ªô pH</div>
                                <div class="d-flex align-items-center">
                                    <div class="parameter-value raw-ph" id="nuoc_tho_ph">...</div>
                                </div>
                                <span class="parameter-status status-good nuoc_tho_ph">B√¨nh th∆∞·ªùng</span>
                            </div>
                            <div class="parameter-item">
                                <div class="parameter-name">ƒê·ªô ƒë·ª•c</div>
                                <div class="d-flex align-items-center">
                                    <div class="parameter-value raw-turbidity" id="nuoc_tho_do_duc">...</div>
                                    <div class="parameter-unit">NTU</div>
                                </div>
                                <span class="parameter-status status-good nuoc_tho_do_duc"></span>
                            </div>
                            <div class="parameter-item">
                                <div class="parameter-name">ƒê·ªô c·ª©ng</div>
                                <div class="d-flex align-items-center">
                                    <div class="parameter-value" id="nuoc_tho_do_cung">...</div>
                                    <div class="parameter-unit">mg/l</div>
                                </div>
                                <span class="parameter-status status-good nuoc_tho_do_cung"></span>
                            </div>
                        </div>
                        <div class="view-details-btn xem_chi_tiet_du_lieu" id="xem_chi_tiet_nuoc_tho">
                            <input type="hidden" id="meter_code_nuoc_tho" data-title="-" />
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                                stroke="currentColor" stroke-width="2">
                                <path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"></path>
                                <circle cx="12" cy="12" r="3"></circle>
                            </svg>
                            Xem chi ti·∫øt
                        </div>
                      </div>
                      <!-- N∆∞·ªõc s·∫°ch -->
                      <div class="water-quality-card" data-type="clean">
                        <h5>üíß N∆Ø·ªöC S·∫†CH - <span class="name_nuoc_sach"></span></h5>
                        <div class="parameter-grid">
                            <div class="parameter-item">
                                <div class="parameter-name">Nhi·ªát ƒë·ªô</div>
                                <div class="d-flex align-items-center">
                                    <div class="parameter-value clean-temp" id="nuoc_sach_nhiet_do">...</div>
                                    <div class="parameter-unit">¬∞C</div>
                                </div>
                                <span class="parameter-status status-good nuoc_sach_nhiet_do">B√¨nh th∆∞·ªùng</span>
                            </div>
                            <div class="parameter-item">
                                <div class="parameter-name">ƒê·ªô pH</div>
                                <div class="d-flex align-items-center">
                                    <div class="parameter-value clean-ph" id="nuoc_sach_ph">...</div>
                                </div>
                                <span class="parameter-status status-good nuoc_sach_ph">B√¨nh th∆∞·ªùng</span>
                            </div>
                            
                            <div class="parameter-item">
                                <div class="parameter-name">Clo d∆∞</div>
                                <div class="d-flex align-items-center">
                                    <div class="parameter-value clean-chlorine" id="nuoc_sach_clo_du">...</div>
                                    <div class="parameter-unit">mg/l</div>
                                </div>
                                <span class="parameter-status status-good nuoc_sach_clo_du">B√¨nh th∆∞·ªùng</span>
                            </div>
                            <div class="parameter-item">
                                <div class="parameter-name">ƒê·ªô ƒë·ª•c</div>
                                <div class="d-flex align-items-center">
                                    <div class="parameter-value clean-turbidity" id="nuoc_sach_do_duc"></div>
                                    <div class="parameter-unit">NTU</div>
                                </div>
                                <span class="parameter-status status-good nuoc_sach_do_duc">B√¨nh th∆∞·ªùng</span>
                            </div>
                            <div class="parameter-item">
                                <div class="parameter-name">ƒê·ªô m·∫∑n</div>
                                <div class="d-flex align-items-center">
                                    <div class="parameter-value" id="nuoc_sach_do_man">...</div>
                                    <div class="parameter-unit">%</div>
                                </div>
                                <span class="parameter-status status-good nuoc_sach_do_man"></span>
                            </div>
                            <div class="parameter-item">
                                <div class="parameter-name">EC</div>
                                <div class="d-flex align-items-center">
                                    <div class="parameter-value clean-ec" id="nuoc_sach_EC">...</div>
                                    <div class="parameter-unit">uS/cm</div>
                                </div>
                                <span class="parameter-status status-good nuoc_sach_EC"></span>
                            </div>
                        </div>
                        <div class="view-details-btn" id="xem_chi_tiet_nuoc_sach">
                            <input type="hidden" id="meter_code_nuoc_sach" data-title="-"  />
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                                stroke="currentColor" stroke-width="2">
                                <path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"></path>
                                <circle cx="12" cy="12" r="3"></circle>
                            </svg>
                            Xem chi ti·∫øt
                        </div>
                      </div>
                    </div>
                    <div style="margin-top: 20px; text-align: center;">
                      <button class="view-details-btn" id="cai_dat_nguong">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                          stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                          <path d="M12 20h9"></path>
                          <path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"></path>
                        </svg>
                        C√†i ƒë·∫∑t ti√™u chu·∫©n ch·∫•t l∆∞·ª£ng n∆∞·ªõc
                      </button>        
                    </div>
                    <!-- Ti√™u chu·∫©n ch·∫•t l∆∞·ª£ng -->
                    <div class="card mt-20 water-quality-card">
                      <h5>üìã TI√äU CHU·∫®N CH·∫§T L∆Ø·ª¢NG N∆Ø·ªöC</h5>
                      <div class="standards-grid">
                        <div class="standard-section">
                          <h4>N∆∞·ªõc th√¥ </h4>
                          <div class="standard-item">
                            <span class="param-name">ƒê·ªô ƒë·ª•c:</span>
                            <span class="param-limit">‚â§ <span id="tc_nuoc_tho_do_duc">...</span> NTU</span>
                            <!-- <span class="param-status good">-</span> -->
                          </div>
                          <div class="standard-item">
                            <span class="param-name">ƒê·ªô pH:</span>
                            <span class="param-limit"><span id="tc_nuoc_tho_ph_min">...</span> - <span
                                id="tc_nuoc_tho_ph_max">...</span></span>
                            <!-- <span class="param-status good">ƒê·∫°t</span> -->
                          </div>
                          <div class="standard-item">
                            <span class="param-name">Nhi·ªát ƒë·ªô:</span>
                            <span class="param-limit">‚â§ <span id="tc_nuoc_tho_nhiet_do">...</span> ¬∞C</span>
                            <!-- <span class="param-status good">ƒê·∫°t</span> -->
                          </div>
                        </div>
                        <div class="standard-section">
                          <h4>N∆∞·ªõc s·∫°ch </h4>
                          <div class="standard-item">
                            <span class="param-name">ƒê·ªô ƒë·ª•c:</span>
                            <span class="param-limit">‚â§ <span id="tc_nuoc_sach_do_duc">...</span> NTU</span>
                            <!-- <span class="param-status good">ƒê·∫°t</span> -->
                          </div>
                          <div class="standard-item">
                            <span class="param-name">ƒê·ªô pH:</span>
                            <span class="param-limit"><span id="tc_nuoc_sach_ph_min">...</span> - <span
                                id="tc_nuoc_sach_ph_max">...</span></span>
                            <!-- <span class="param-status good">ƒê·∫°t</span> -->
                          </div>
                          <div class="standard-item">
                            <span class="param-name">Clo d∆∞:</span>
                            <span class="param-limit"><span id="tc_nuoc_sach_clo_du_min">...</span> - <span
                                id="tc_nuoc_sach_clo_du_max">...</span> mg/l</span>
                            <!-- <span class="param-status good">ƒê·∫°t</span> -->
                          </div>
                          <div class="standard-item">
                            <span class="param-name">EC:</span>
                            <span class="param-limit">‚â§ <span id="tc_nuoc_sach_EC">...</span> uS/cm</span>
                            <!-- <span class="param-status good">-</span> -->
                          </div>
                        </div>
                      </div>          
                    </div>
                    <!-- C·∫£nh b√°o ch·∫•t l∆∞·ª£ng -->
                    <div class="alert-panel water-quality-card">
                      <h5>‚úÖ TR·∫†NG TH√ÅI CH·∫§T L∆Ø·ª¢NG</h5>
                      <div class="alert-item alert-low">
                        <div class="alert-icon">üü¢</div>
                        <div class="alert-content">
                          <div class="alert-title">Ch·∫•t l∆∞·ª£ng n∆∞·ªõc th√¥ ·ªïn ƒë·ªãnh</div>
                          <div class="alert-desc">T·∫•t c·∫£ ch·ªâ s·ªë trong ng∆∞·ª°ng cho ph√©p</div>
                          <div class="alert-time">C·∫≠p nh·∫≠t: 14:45</div>
                        </div>
                      </div>
                      <div class="alert-item alert-low">
                        <div class="alert-icon">üü¢</div>
                        <div class="alert-content">
                          <div class="alert-title">Ch·∫•t l∆∞·ª£ng n∆∞·ªõc s·∫°ch ƒë·∫°t chu·∫©n</div>
                          <div class="alert-desc">ƒê√°p ·ª©ng QCVN 01:2023/BYT</div>
                          <div class="alert-time">C·∫≠p nh·∫≠t: 14:45</div>
                        </div>
                      </div>
                      <div class="alert-item alert-low">
                        <div class="alert-icon">üü¢</div>
                        <div class="alert-content">
                          <div class="alert-title">H·ªá th·ªëng x·ª≠ l√Ω ho·∫°t ƒë·ªông t·ªët</div>
                          <div class="alert-desc">Hi·ªáu su·∫•t x·ª≠ l√Ω: 98.5%</div>
                          <div class="alert-time">C·∫≠p nh·∫≠t: 14:30</div>
                        </div>
                      </div>          
                    </div>
                </div>
            </div>
          </section>

          <!-- right col -->
        </div>
        <!-- /.row (main row) -->
      </div><!-- /.container-fluid -->
    </section>
    <!-- /.content -->
  </div>
  <div id="loading-overlay" style="display: none;">
    <div class="spinner-border text-primary" role="status"></div>
    <span>ƒêang t·∫£i d·ªØ li·ªáu...</span>
</div>
<div id="notification" class="text-center"></div>

<!-- Popup c·∫£nh b√°o -->
<div id="alert-container" style=" font-size: small;"></div>

  <!-- /.content-wrapper -->
           <!-- modal l·ªãch s·ª≠ d·ªØ li·ªáu -->
           <div id="lich_su_du_lieu" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true" data-keyboard="false" data-backdrop="static">
            <div class="modal-dialog " role="document" style="max-width: 90%; height: 800px;">
                <div class="modal-content">
                    <div class="modal-header">
                          <h4>üìä L·ªãch s·ª≠ - <span id="modal_title"></span></h4>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    </div>
                    <div class="modal-body">
                      <div class="row mb-1 d-flex flex-wrap align-items-end">
                        <div class="col-md-3 col-6">
                          <div class="form-group">
                            <label for="">T·ª´ ng√†y:</label>
                            <input class="form-control" type="text" autocomplete="off" id="meter_data_time_from">
                          </div>    
                        </div>
                        <div class="col-md-3 col-6">
                          <div class="form-group">
                            <label for="">ƒê·∫øn ng√†y:</label>
                            <input class="form-control" type="text" autocomplete="off" id="meter_data_time_to">
                          </div>
                        </div>
                        <div class="col-auto">
                          <button class="btn btn-primary mr-2" style="margin-bottom: 16px" onclick="init_data()"> <i class="fa fa-search"
                              aria-hidden="true"></i> Xem d·ªØ li·ªáu</button>    
                              <button class="btn btn-success" style="margin-bottom: 16px" onclick="export_data()"> Xu·∫•t d·ªØ li·ªáu</button>
                          </div>
                      </div>
                      <ul class="nav nav-tabs" id="nuocThoTabs" role="tablist">
                        <li class="nav-item">
                          <a class="nav-link active" id="tab-chart" data-toggle="tab" href="#chart" role="tab">
                            Bi·ªÉu ƒë·ªì
                          </a>
                        </li>
                        <li class="nav-item">
                          <a class="nav-link " id="tab-history" data-toggle="tab" href="#history" role="tab">
                            L·ªãch s·ª≠
                          </a>
                        </li>
             
                      </ul>
                      <!-- Tab content -->
                      <div class="tab-content mt-3">
                      
                        <!-- TAB L·ªäCH S·ª¨ -->
                        <!-- TAB BI·ªÇU ƒê·ªí -->
                        <div class="tab-pane fade show active" id="chart" role="tabpanel">
                      
                          <div id="history_chart_div" style="width: 100%; height: 500px;"></div>
                      
                        </div>
                        <div class="tab-pane fade " id="history" role="tabpanel" style="width: 100%; min-height: 500px;">
                      
                          <table id="history_table" class="table w-100">
                            <thead id="history_table_thead" style="background-color: #a8dbf0;">
           
                            </thead>
                            <tbody id="history_table_tbody">

                            </tbody>
                          </table>
                      
                        </div>
                      
    
                      </div>
                    </div>
  
                </div>
            </div>
        </div>
    <!-- /.content-wrapper -->


      <!-- /.content-wrapper -->

               <!-- modal c√†i ƒë·∫∑t ng∆∞·ª°ng -->
               <div id="cai_dat_nguong_modal" class="modal fade" tabindex="-1" role="dialog" data-keyboard="false" data-backdrop="static">
                <div class="modal-dialog " role="document" style="max-width: 90%; height: 800px;">
                    <div class="modal-content">
                        <div class="modal-header">
                              <h4>C√†i ƒë·∫∑t ti√™u chu·∫©n ch·∫•t l∆∞·ª£ng n∆∞·ªõc</h4>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        </div>
                        <div class="modal-body">
                          <div class="settings-container">
                            <h3>Ti√™u chu·∫©n n∆∞·ªõc th√¥</h3>
                            <div class="standard-grid">
                              <div class="standard-card">
                                <h4>üåä N∆∞·ªõc th√¥</h4>
                                <div class="parameter-setting">
                                  <div class="parameter-info">
                                    <div class="parameter-name">ƒê·ªô ƒë·ª•c</div>
                                    <div class="parameter-unit">NTU</div>
                                  </div>
                                  <div class="threshold-inputs">
                                    <div class="threshold-input">
                                      <label>Ng∆∞·ª°ng d∆∞·ªõi</label>
                                      <input type="number" id="raw-turbidity-min" step="0.1">
                                    </div>
                                    <div class="threshold-input">
                                      <label>Ng∆∞·ª°ng tr√™n</label>
                                      <input type="number" id="raw-turbidity-max" step="0.1">
                                    </div>
                                  </div>
                                </div>
                                <div class="parameter-setting">
                                  <div class="parameter-info">
                                    <div class="parameter-name">ƒê·ªô pH</div>
                                    <div class="parameter-unit">pH</div>
                                  </div>
                                  <div class="threshold-inputs">
                                    <div class="threshold-input">
                                      <label>Ng∆∞·ª°ng d∆∞·ªõi</label>
                                      <input type="number" id="raw-ph-min" step="0.1">
                                    </div>
                                    <div class="threshold-input">
                                      <label>Ng∆∞·ª°ng tr√™n</label>
                                      <input type="number" id="raw-ph-max" step="0.1">
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          
                            <h3 style="margin-top: 30px;">Ti√™u chu·∫©n n∆∞·ªõc s·∫°ch</h3>
                            <div class="standard-grid">
                              <div class="standard-card">
                                <h4>üíß N∆∞·ªõc s·∫°ch</h4>
                                <div class="parameter-setting">
                                  <div class="parameter-info">
                                    <div class="parameter-name">Nhi·ªát ƒë·ªô</div>
                                    <div class="parameter-unit">¬∞C</div>
                                  </div>
                                  <div class="threshold-inputs">
                                    <div class="threshold-input">
                                      <label>Ng∆∞·ª°ng d∆∞·ªõi</label>
                                      <input type="number" id="clean-temp-min" step="0.1">
                                    </div>
                                    <div class="threshold-input">
                                      <label>Ng∆∞·ª°ng tr√™n</label>
                                      <input type="number" id="clean-temp-max" step="0.1">
                                    </div>
                                  </div>
                                </div>
                                <div class="parameter-setting">
                                  <div class="parameter-info">
                                    <div class="parameter-name">ƒê·ªô pH</div>
                                    <div class="parameter-unit">pH</div>
                                  </div>
                                  <div class="threshold-inputs">
                                    <div class="threshold-input">
                                      <label>Ng∆∞·ª°ng d∆∞·ªõi</label>
                                      <input type="number" id="clean-ph-min" step="0.1">
                                    </div>
                                    <div class="threshold-input">
                                      <label>Ng∆∞·ª°ng tr√™n</label>
                                      <input type="number" id="clean-ph-max" step="0.1">
                                    </div>
                                  </div>
                                </div>
                                <div class="parameter-setting">
                                  <div class="parameter-info">
                                    <div class="parameter-name">Clo d∆∞</div>
                                    <div class="parameter-unit">mg/l</div>
                                  </div>
                                  <div class="threshold-inputs">
                                    <div class="threshold-input">
                                      <label>Ng∆∞·ª°ng d∆∞·ªõi</label>
                                      <input type="number" id="clean-clo-min" step="0.1">
                                    </div>
                                    <div class="threshold-input">
                                      <label>Ng∆∞·ª°ng tr√™n</label>
                                      <input type="number" id="clean-clo-max" step="0.1">
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>             
                          </div>
                  
                        </div>  
                        <div class="modal-footer">
                          <button class="btn btn-info" onclick="resetStandards()">ƒê·∫∑t l·∫°i m·∫∑c ƒë·ªãnh</button>
                            <button class="btn btn-success" onclick="saveStandards()">L∆∞u c√†i ƒë·∫∑t</button>
                          </div>
                    </div>
                </div>
            </div>
        <!-- /.content-wrapper -->
</div>
<!-- ./wrapper -->
 <!-- jQuery -->
<!-- <script src="/plugins_2/jquery/jquery.min.js"></script> -->
<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>

<!-- jQuery UI 1.11.4 -->
<script src="/plugins_2/jquery-ui/jquery-ui.min.js"></script>
 <!-- amchartjs -->
<script type="text/javascript" src="https://www.amcharts.com/lib/3/amcharts.js"></script>
<script type="text/javascript" src="https://www.amcharts.com/lib/3/serial.js"></script>
<script src="https://cdn.amcharts.com/lib/4/core.js"></script>
<script src="https://cdn.amcharts.com/lib/4/charts.js"></script>
<script src="https://cdn.amcharts.com/lib/4/themes/animated.js"></script>


<!-- Resolve conflict in jQuery UI tooltip with Bootstrap tooltip -->

<script>
  $.widget.bridge('uibutton', $.ui.button)
</script>
<!-- Bootstrap 4 -->
<script src="/plugins_2/bootstrap/js/bootstrap.bundle.min.js"></script>
<!-- Select2 -->
<script src="/plugins_2/select2/js/select2.full.min.js"></script>

<!-- ChartJS -->
<script src="/plugins_2/chart.js/Chart.min.js"></script>
<!-- Sparkline -->
<script src="/plugins_2/sparklines/sparkline.js"></script>
<!-- JQVMap -->
<script src="/plugins_2/jqvmap/jquery.vmap.min.js"></script>
<script src="/plugins_2/jqvmap/maps/jquery.vmap.usa.js"></script>
<!-- jQuery Knob Chart -->
<script src="/plugins_2/jquery-knob/jquery.knob.min.js"></script>
<!-- daterangepicker -->
<script src="/plugins_2/moment/moment.min.js"></script>
<script src="/plugins_2/daterangepicker/daterangepicker.js"></script>
<!-- Tempusdominus Bootstrap 4 -->
<script src="/plugins_2/tempusdominus-bootstrap-4/js/tempusdominus-bootstrap-4.min.js"></script>
<!-- Summernote -->
<script src="/plugins_2/summernote/summernote-bs4.min.js"></script>
<!-- overlayScrollbars -->
<script src="/plugins_2/overlayScrollbars/js/jquery.overlayScrollbars.min.js"></script>
<!-- AdminLTE App -->
<script src="/dist/js/adminlte.js"></script>
<!-- AdminLTE dashboard demo (This is only for demo purposes) -->
<script src="/dist/js/pages/dashboard.js"></script>
<!-- AdminLTE for demo purposes -->
<script src="/dist/js/demo.js"></script>
<!-- DataTables -->

<!-- <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.22/css/jquery.dataTables.css">
<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.22/js/jquery.dataTables.js"></script>
<script src="//cdn.rawgit.com/ashl1/datatables-rowsgroup/v1.0.0/dataTables.rowsGroup.js"></script> -->

<!-- DataTable -->
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.22/css/jquery.dataTables.css">
<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.22/js/jquery.dataTables.js"></script>
<script src="//cdn.rawgit.com/ashl1/datatables-rowsgroup/v1.0.0/dataTables.rowsGroup.js"></script>
<!-- momentjs and daterangepicker -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" />

<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/css/bootstrap-select.min.css">

<!-- Latest compiled and minified JavaScript -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/js/bootstrap-select.min.js"></script>

<!-- (Optional) Latest compiled and minified JavaScript translation files -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/js/i18n/defaults-*.min.js"></script>
<script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
  <!-- bootsrap-select -->
  <link href="https://cdn.jsdelivr.net/gh/gitbrent/bootstrap4-toggle@3.6.1/css/bootstrap4-toggle.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/gh/gitbrent/bootstrap4-toggle@3.6.1/js/bootstrap4-toggle.min.js"></script>
<script>
      var user_id = <%- user_id %>

    $(function () {
        $('.selectpicker').selectpicker();
    });
    function showLoading() {
        document.getElementById("loading-overlay").style.display = "flex";
    }

    function hideLoading() {
        document.getElementById("loading-overlay").style.display = "none";
    }
    $('.select2bs4').select2({
        theme: 'bootstrap4',
        closeOnSelect: false,
        tags: true

      })

    $(".select2bs4").on("select2:select", function (evt) {
      var element = evt.params.data.element;
      var $element = $(element);
      
      $element.detach();
      $(this).append($element);
      $(this).trigger("change");
    });

    function show_notification(message, type) {
                var notification = $("#notification");
                notification.text(message).removeClass("error success").addClass(type);
                notification.css("top", "20px").fadeIn();

                // ·∫®n sau 3 gi√¢y
                setTimeout(function () {
                    notification.fadeOut(function () {
                        notification.css("top", "-50px");
                    });
                }, 5000);
          }
</script>
<script src="/javascripts/general.js"></script>
<script src="/javascripts/overview.js"></script>

</body>
</html>
